---
- name: Add an Apt signing key
  apt_key:
    url: https://packages.cloud.google.com/apt/doc/apt-key.gpg
    state: present

- apt_repository:
    repo: deb http://apt.kubernetes.io/ kubernetes-xenial main
    state: present

- name: update apt-cache
  apt: update_cache=yes cache_valid_time=3600

- name: Install kubectl 1.14.0-00
  apt: name="kubectl=1.14.0-00"

- name: Create kubeconfig dir
  file:
    path: /home/admin/.kube
    mode: 0700
    state: directory
  become: false

- name: Copy kubeclt config
  copy:
    src: ~/.kube/config
    dest: /home/admin/.kube/config
    mode: 0600
  become: false